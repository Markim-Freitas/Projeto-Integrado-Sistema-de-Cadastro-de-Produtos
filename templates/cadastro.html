<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Produtos</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <h1>Cadastro de Produtos</h1>
    <!-- Formulário de cadastro de produto -->
    <form action="/cadastrar" method="POST">
        <label for="codigo_barras">Código de Barras:</label>
        <input type="text" id="codigo_barras" name="codigo_barras" required><br><br>

        <label for="nome">Nome do Produto:</label>
        <input type="text" id="nome" name="nome" required><br><br>

        <label for="categoria">Categoria:</label>
        <input type="text" id="categoria" name="categoria" required><br><br>

        <label for="quantidade">Quantidade em Estoque:</label>
        <input type="number" id="quantidade" name="quantidade" required><br>

        <label for="preco">Preço:</label>
        <input type="text" id="preco" name="preco" required><br>

        <label for="localizacao">Localização no Depósito:</label>
        <input type="text" id="localizacao" name="localizacao" required><br>

        <label for="validade">Data de Validade (Opcional):</label>
        <input type="date" id="validade" name="validade"><br>

        <button type="submit">Cadastrar Produto</button>
    </form>

    <h2>Atualizar Estoque</h2>
    <!-- Formulário para atualizar o estoque (receber novos itens) -->
    <form action="/atualizar_estoque" method="POST">
        <label for="codigo_barras_atualizar">Código de Barras do Produto:</label>
        <input type="text" id="codigo_barras_atualizar" name="codigo_barras" required><br><br>

        <label for="quantidade_recebida">Quantidade a Adicionar:</label>
        <input type="number" id="quantidade_recebida" name="quantidade" required><br><br>

        <button type="submit">Atualizar Estoque</button>
    </form>

    <h2>Vender Produtos</h2>
    <!-- Formulário para registrar venda de produtos -->
    <form action="/vender_produto" method="POST">
        <label for="codigo_barras_vender">Código de Barras do Produto:</label>
        <input type="text" id="codigo_barras_vender" name="codigo_barras" required><br><br>

        <label for="quantidade_venda">Quantidade a Vender:</label>
        <input type="number" id="quantidade_venda" name="quantidade" required><br><br>

        <button type="submit">Vender Produto</button>
    </form>

    <h2>Atualizar Localização de Produto</h2>
    <!-- Formulário para atualizar a localização de um produto -->
    <form action="/atualizar_localizacao" method="POST">
        <label for="codigo_barras_localizacao">Código de Barras do Produto:</label>
        <input type="text" id="codigo_barras_localizacao" name="codigo_barras" required><br><br>

        <label for="setor">Setor:</label>
        <input type="text" id="setor" name="setor" required><br><br>

        <label for="corredor">Corredor:</label>
        <input type="text" id="corredor" name="corredor" required><br><br>

        <label for="prateleira">Prateleira:</label>
        <input type="text" id="prateleira" name="prateleira" required><br><br>

        <button type="submit">Atualizar Localização</button>
    </form>

    <h1>Relatório de Estoque</h1>

    <h2>Produtos com Estoque Baixo</h2>
    <ul>
        {% for produto in produtos_baixo_estoque %}
            <li>{{ produto.nome }} - Quantidade: {{ produto.quantidade }} - Localização: Setor {{ produto.localizacao.setor }}, Corredor {{ produto.localizacao.corredor }}, Prateleira {{ produto.localizacao.prateleira }}</li>
        {% else %}
            <li>Nenhum produto com estoque baixo</li>
        {% endfor %}
    </ul>

    <h2>Produtos com Excesso de Estoque</h2>
    <ul>
        {% for produto in produtos_excesso_estoque %}
            <li>{{ produto.nome }} - Quantidade: {{ produto.quantidade }}</li>
        {% else %}
            <li>Nenhum produto com excesso de estoque</li>
        {% endfor %}
    </ul>

    <h2>Produtos com Validade Próxima</h2>
    <ul>
        {% for produto in produtos_validade_proxima %}
            <li>{{ produto.nome }} - Validade: {{ produto.validade }}</li>
        {% else %}
            <li>Nenhum produto com validade próxima</li>
        {% endfor %}
    </ul>

    <button onclick="window.history.back()">Voltar</button>

    <h2>Lista de Produtos</h2>
    <<ul>
        {% for produto in produtos %}
        <li>
            <h3>{{ produto.nome }} - {{ produto.categoria }}</h3>
            <p>Preço: R$ {{ produto.preco }}</p>
            <p>Quantidade de Estoque: {{ produto.quantidade}}</p>
            <p>Localização: Setor {{ produto.localizacao.setor }}, Corredor {{ produto.localizacao.corredor }},
                Prateleira
                {{ produto.localizacao.prateleira }}</p>
            <p>Código de Barras: {{ produto.codigo_barras }}</p>
            <p>Validade: {% if produto.validade %} {{ produto.validade }} {% else %} Não se aplica {% endif %}</p>
        </li>
        {% endfor %}
        </ul>
</body>

</html>